$(function(){var a={init:function(){this.placeholder(),this.attach()},placeholder:function(){if(!(0<$(".istockphoto-placeholder").length)&&0!==$(".icon-grid").length){var e=$(".icon-grid .icon-preview"),t=Math.round($(".icon-grid").width()/$(".icon-preview").width()),i=$(window).height()-$(".icon-grid").offset().top,o=Math.floor(i/$(".icon-preview").height()),a=Math.floor(e.length/t);o<6&&(o=6),a<o?o=a:o--;var r=t*o,s=$("<div />",{class:"istockphoto-placeholder d-none d-sm-block","data-phrase":$(".suggestions .new_query strong").text()||$("[data-phrase]").data("phrase")||$.url().param("q")||""});r>e.length&&(r=e.length);for(var n=0,c=0;c<e.length;c++)c%t==0&&0!=c&&n<6&&r<=c&&c%r==0&&(e.eq(c-1).after(s.clone()),n++)}},in_view:function(){if(0===$(".istockphoto-placeholder").length)return!1;var e=$(window).scrollTop(),t=$(window).height();return $(".istockphoto-placeholder").offset().top<=t+e},attach:function(){0!==$(".istockphoto-placeholder").length&&(a.in_view()?a.fetch():this.defer())},defer:function(){0!==$(".istockphoto-placeholder").length&&$(window).on("scroll.istock",function(){a.in_view()&&(a.fetch(),$(window).off("scroll.istock"))})},search_data:function(e){var t=$(".istockphoto-placeholder").data(),i={sort_order:t.sort_order||"best_match",phrase:t.phrase+" NOT sets NOT Silhouettes",graphical_styles:"illustration,vector",exclude_nudity:"true",orientations:"square",page_size:96,fields:"summary_set,referral_destinations",include_related_searches:!0};return e&&(i.phrase=a.search_history()),i},search_history:function(){var e=localStorage.getItem("search_history");if(e){var t=JSON.parse(e);if(0<t.length&&"value"in t[0])return t[0].value}return!1},fetch:function(i){var o=a.search_data(i);$.ajax({url:"https://api.gettyimages.com/v3/search/images/creative",data:o,headers:{"Api-Key":"mumzxpc2xmrksfyv7fj9d2uz"},success:function(e){var t={phrase:o.phrase,sharedid:o.sharedid||"SRP"};t.images=$.map(e.images,function(e){return{thumbnail:_.findWhere(e.display_sizes,{name:"thumb"}),link:_.findWhere(e.referral_destinations,{site_name:"istockphoto"})}}),"related_searches"in e&&0<e.related_searches.length&&(t.related_searches=e.related_searches.slice(0,6)),t.images.length<3&&!i&&a.search_history()?a.fetch(!0):a.render(t)}})},render:function(i){var o="ads/_istock.html";full_list_of_images=i.images,$(".istockphoto-placeholder").each(function(e){size=24,i.images=full_list_of_images,i.images=i.images.slice(e*size,e*size+size),i.images.length<3&&(o="ads/_istock_generic.html",ga("send","event","iStock","Show Banner","Fallback"));var t=templates.render(o,i);$(this).html(t)}),$('.istockphoto-banner [data-toggle="tooltip"]').tooltip()}};a.init(),$(document).on("search.results",function(){a.init()}),$(document).on("click",'[data-trigger="istock-popup"]',function(){var e=$.map({width:600,height:400,left:100,top:100,menubar:"no",toolbar:"no",location:"no",status:"no"},function(e,t){return t+"="+e}).join(",");window.open("/marketing/istock-code","Discount code",e)})});
//# sourceMappingURL=https://www.iconfinder.com/static/js/istock.js.map
